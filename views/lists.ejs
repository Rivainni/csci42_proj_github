<%- include("navbar.ejs", {active_username})%>
<h1>Lists Page</h1>

<% for (data of listData) { %>
    <li><%= data.list_id%>, <%= data.list_name%></li>
    <% } %>

<div class="container">
    <div class="row">
        <div class="col-md-10">
        <div class="card">
            <div class="card-header container-fluid">
            
                <!-- DELETE Button trigger modal -->
                <button class="btn btn-success" type="button" data-bs-toggle="modal" data-bs-target="#addModal"> 
                   Add New List 
                </button>       
                        <!-- Modal -->
                        <div class="modal fade" id="addModal" tabindex="-1" role="dialog" aria-labelledby="addModalLabel" aria-hidden="true">
                        <div class="modal-dialog" role="document">
                            <div class="modal-content">
                            <div class="modal-header">
                                <h5 class="modal-title" id="addModalLabel">Add New List</h5>                                          
                            </div>
                            <form action="/lists/addNewList" method="post" name="addListForm">
                            <div class="modal-body">
                                <label for="newLabelName" class="col-form-label">Enter a new list name</label>
                                <input type="text" name="newLabelName" class="form-control" id="newLabelName">
                            </div>
                            <div class="modal-footer">
                                <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Cancel</button>
                                <button type="submit" class="btn btn-primary">Yes</button>
                                <input type="hidden" name="userName" value="<%= active_username %>" class="visually-hidden">
                                </form>
                            </div>
                            </div>
                        </div>
                        </div>
            </div>
        </div>
        </div>
    </div>
    <% for (data of listData) { %>
    <div class="row">
   
    <div class="col-md-10">
    <div class="card">
        
    <ul class="list-group list-group-flush">


        <li class="list-group-item">          
            <div class="table-responsive card-body">
            
                <table class="table table-sm table-hover">
                  <thead class="thead-default">
                    <tr>
                        <td><h5><%= data.list_name%></h5></td>
                        <td style="text-align: right;">
                            <button class="btn btn-secondary" type="button">
                                
                                <a  href="/listDetail" style="text-decoration:none;" class="text-white">Edit</a>
                            </button> 
                            <!-- DELETE Button trigger modal -->
                            <button class="btn btn-danger" type="button" data-bs-toggle="modal" data-bs-target="#exampleModal<%= data.list_id %>"> 
                                Delete
                            </button>       
                                  <!-- Modal -->
                                  <div class="modal fade" id="exampleModal<%= data.list_id %>" tabindex="-1" role="dialog" aria-labelledby="exampleModalLabel<%= data.list_id %>" aria-hidden="true">
                                    <div class="modal-dialog" role="document">
                                      <div class="modal-content">
                                        <div class="modal-header">
                                          <h5 class="modal-title" id="exampleModalLabel<%= data.list_id %>">Confirm Delete</h5>                                          
                                        </div>
                                        <div class="modal-body">
                                          Are you sure you want to delete this list and all related to it?
                                        </div>
                                        <div class="modal-footer">
                                          <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Cancel</button>
                                          <form action="/lists/deleteList" method="post" name="deleteListForm<%= data.list_id %>">
                                          <button type="submit" class="btn btn-primary">Yes</button>
                                          <input type="hidden" name="userName" value="<%= active_username %>" class="visually-hidden">
                                          <input type="hidden" name="list_id" value="<%= data.list_id %>" class="visually-hidden">
                                          </form>
                                        </div>
                                      </div>
                                    </div>
                                  </div>



                        </td>
                    </tr>
                  </thead>    
                </table>
            </div>     
        </li>    
    
        



    </ul>  
    
    </div>      


    </div>
    </div>   
    <% } %>

<%- include("footer.ejs")%>